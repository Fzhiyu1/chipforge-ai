# ChipForge-AI 需求文档

> 版本：v1.0
> 日期：2026-01-11
> 状态：草稿

## 1. 项目概述

### 1.1 项目名称
ChipForge-AI - AI-powered FPGA development toolkit

### 1.2 项目背景
- 用户在公司开发了 IC Coder（基于 LangChain4j 的智能体系统）
- 即将离职，需要创建个人项目
- 希望保留 FPGA 开发经验和知识
- 不想构建复杂的智能体系统，而是利用 Claude Code 的能力

### 1.3 项目目标
创建一个轻量级的 FPGA 开发工具服务器，通过 MCP 协议与 Claude Code 集成，提供：
- 知识图谱查询
- 仿真工具封装
- 波形调试支持
- 综合工具封装
- 项目管理功能

---

## 2. 用户角色

### 2.1 主要用户
**FPGA 开发工程师**
- 熟悉 Verilog/VHDL
- 使用 Vivado/Quartus 等工具
- 需要快速查询语法和设计模式
- 希望自动化重复性工作

### 2.2 使用场景

**场景 1：RTL 设计**
```
用户需求：设计一个 8 位计数器
期望流程：
1. 用户输入 /fpga-dev
2. 描述需求
3. Claude Code 查询知识图谱
4. 生成 Verilog 代码
5. 自动运行仿真
6. 分析波形
7. 报告结果
```

**场景 2：语法查询**
```
用户需求：查询 always 块的用法
期望流程：
1. 用户提问
2. 系统查询知识图谱
3. 返回语法说明和示例
```

**场景 3：仿真调试**
```
用户需求：仿真代码并分析波形
期望流程：
1. 用户提供代码
2. 系统运行仿真
3. 生成波形文件
4. 自动分析波形
5. 指出潜在问题
```

---

## 3. 功能需求

### 3.1 核心功能

**FR-1: 知识图谱查询**
- 支持 Verilog 语法查询
- 支持设计模式查询
- 支持最佳实践查询
- 返回代码示例

**FR-2: 仿真工具封装**
- 支持 ModelSim 仿真
- 支持 Icarus Verilog 仿真
- 自动生成波形文件
- 支持仿真参数配置

**FR-3: 波形分析**
- 解析 VCD 波形文件
- 检测信号异常
- 提供调试建议
- 支持波形对比

**FR-4: 综合工具封装**
- 支持 Vivado 综合
- 支持 Quartus 综合
- 解析综合报告
- 提取关键指标

**FR-5: 项目管理**
- 项目初始化
- 状态跟踪
- 文件版本管理
- 报告生成

### 3.2 Skill 功能

**FR-6: 工作流程编排**
- 自动化 RTL → 仿真 → 综合流程
- 支持自定义工作流
- 错误处理和重试

**FR-7: 项目配置**
- 创建项目配置文件
- 管理项目元数据
- 跟踪开发进度

---

## 4. 非功能需求

### 4.1 性能要求
- **NFR-1**: MCP 工具调用响应时间 < 1 秒
- **NFR-2**: 知识图谱查询响应时间 < 500ms
- **NFR-3**: 支持并发调用（至少 5 个并发请求）

### 4.2 可用性要求
- **NFR-4**: 安装步骤不超过 3 步
- **NFR-5**: 提供清晰的错误信息
- **NFR-6**: 支持中文和英文

### 4.3 可维护性要求
- **NFR-7**: 代码注释覆盖率 > 50%
- **NFR-8**: 单元测试覆盖率 > 80%
- **NFR-9**: 提供完整的 API 文档

### 4.4 兼容性要求
- **NFR-10**: 支持 Windows/Linux/macOS
- **NFR-11**: 兼容 Java 17+
- **NFR-12**: 兼容 Claude Code 最新版本

---

## 5. 约束条件

### 5.1 技术约束
- 必须使用 MCP 协议
- 必须使用 Java + Spring Boot
- 必须使用 MCP Java SDK 0.12.1

### 5.2 资源约束
- 个人项目，单人开发
- 无预算限制（开源工具）
- 开发时间：3 个月

### 5.3 外部依赖
- 依赖 Claude Code CLI
- 依赖 FPGA 工具（ModelSim/Vivado 等）
- 依赖 Java 运行环境

---

## 6. 验收标准

### 6.1 MVP 验收标准
- ✅ MCP 服务器可以启动
- ✅ 至少实现 2 个工具（知识图谱 + 仿真）
- ✅ Skill 可以调用 MCP 工具
- ✅ 完成一个完整的设计流程（设计 → 仿真 → 报告）

### 6.2 正式版本验收标准
- ✅ 实现所有 5 个核心功能
- ✅ 单元测试覆盖率 > 80%
- ✅ 性能满足要求
- ✅ 提供完整文档
- ✅ 至少 3 个用户测试通过

---

## 7. 不包含的功能

明确说明以下功能**不在**本项目范围内：
- ❌ 自动代码生成（由 Claude Code 完成）
- ❌ 复杂的智能体系统
- ❌ 在线协作功能
- ❌ 商业化功能
- ❌ Web UI 界面
- ❌ 代码版本控制（使用 Git）

---

## 8. 风险和假设

### 8.1 假设
- 用户已安装 Claude Code
- 用户已安装 FPGA 工具（ModelSim/Vivado）
- 用户熟悉基本的 FPGA 开发流程

### 8.2 风险
- MCP SDK 可能不稳定（新技术）
- FPGA 工具封装可能复杂
- 用户接受度未知

---

## 9. 优先级

### P0 - 必须有
- 知识图谱查询
- 仿真工具封装
- Skill 基础功能

### P1 - 应该有
- 波形分析
- 项目管理
- 错误处理

### P2 - 可以有
- 综合工具封装
- 高级调试功能
- 性能优化

### P3 - 未来考虑
- 更多 FPGA 工具支持
- 插件系统
- 社区功能

---

**审批：**
- [ ] 需求确认
- [ ] 技术可行性评估
- [ ] 开始架构设计
